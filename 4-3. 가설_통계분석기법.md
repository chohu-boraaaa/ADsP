## 6. 가설

### 1. 가설검증
- 가설의 진실여부 증명
- 통계적 유의성 검정하는 것으로 유의성 검정이라고도 함
- 모수에서 표본을 사용하여 진실여부를 True 혹은 False로 판단
- 귀무가설(H0)이 사실이라고 가정하고 검증

#### 1-1. 귀무가설
- 기존에 알려진 사실, 일반적으로 진실이라고 믿고 있는 것
- 통계적 검정대상이 됨
- 모집단평균과 표본평균은 같음
- 비교하는 값과 차이가 없다는 것은 기본 개념으로 설정하는 가설 -> H0 : μ =  μ0 (μ는 샘플평균,  μ0는 모평균 or 목표값)
- ex. 모든 피고는 무죄이다. 제네시스는 연비가 10km이다.

#### 1-2. 대립가설
- 연구가설이라고도 하고 귀무가설과 대립하는 가설로 새로운 사실을 입증
- 모수의 표본을 사용해서 검증
- 모집단과 표본평균은 다름
- 대립가설은 단측가설과 양측가설로 분류
- ex. 모든 피고는 유죄이다. 제네시스는 연비가 10km가 아니다.

#### 1-3. 가설검정의 종류
* 가설검정은 귀무가설을 채택할 것인지 기각할 것인지 검증
* 가설검증은 유의수준 0.05(5%)일 때 데이터가 95%의 신뢰구간에 들어오는지 확인하는 것
* 이를 위해서 검정통계량, p-value를 사용

##### 1> 우측검정
- 유의수준 0.05(5%)일 때
- 전체 100%에서 오른쪽 5% 내에 있는지 확인
- 95% 구간을 벗어나면 귀무가설은 기각

##### 2> 좌측검정
- 유의수준 0.05(5%)일 때
- 좌측 5%로 검정하여 귀무가설을 채택할지 기각할지 결정

##### 3> 양측검정
- 유의수준 0.05(5%)일 때
- 우측과 좌측 2.5% 구간을 기준으로 귀무가설을 채택할지 기각할지 결정

![가설검정](https://mblogthumb-phinf.pstatic.net/MjAxODA0MTRfMTIw/MDAxNTIzNjc0NTk4Nzky.HzuQXMOdlQNfAmAj2My4O0GxEWTBQp4xCHNDVZ3M9Egg.FdeR__LiquY_3O3ziF99BZTDKkpylZdeU1NFZR7B6Yog.PNG.firerisk/image.png?type=w800)
출처 : https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=firerisk&logNo=221252732589

### 2. 가설검증의 절차

#### 2-1. 귀무가설과 대립(연구)가설 설정
- 귀무가설을 설정하고 우측검정/좌측검정/양측검정 수행

#### 2-2. 유의수준 설정
- 적당한 유의수준 설정

#### 2-3. 검정방법 설정
- 통계적분석 방법 설정

#### 2-4. 검정통계량 계산
- 검정 통계량과 유의확률(p-value) 계산

#### 2-5. 통계적 의사결정
- 비즈니스적으로 의사결정

### 3. 가설검증 오류

#### 3-1. 1종 오류(알파)
- 귀무가설(H0)이 진실인데 귀무가설(H0)을 기각하는 오류
- 잘못된 부정적 의견을 표명하는 오류
- 기각 오류, 과소 신뢰의 오류

#### 3-2. 2종 오류(베타)
- 귀무가설(H0)이 거짓인데 귀무가설(H0)을 채택하는 오류
- 잘못된 적정 의견을 표명하는 오류
- 채택 오류, 과대 신뢰의 오류

![오류유형](https://blog.kakaocdn.net/dn/XF6ui/btqRqQzbcP2/wEMk8WA9YSw8TnLD7zUnFK/img.png)

출처 : https://drhongdatanote.tistory.com/76

![오류유형그림](https://mblogthumb-phinf.pstatic.net/MjAxOTA4MDhfMjA2/MDAxNTY1MjczMzc3Mzg1.W3rvnNsArz54Y8i1XNCBWRKqb9qjA2850TWUL6wURagg.v3ts2491e5NIWKAeXv72ZuWTg1EI4ecz9oKSnllJOlYg.PNG.uranusjj/image.png?type=w800)

출처 : https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=uranusjj&logNo=221610312776

### 4. 유의확률(p-value)
* 귀무가설이 진실이라는 가정에서 표본 통계량의 값이 나타내는 확률
* 보통 95%의 신뢰도를 기준으로 가설판단에 사용됨
* 0~1 사이의 값을 가지고 있고 p값은 전체 표본에서 하나의 표본이 나올 수 있는 확률
* p(0.000) < α(0.05) 귀무가설 기각되고 대립가설 채택
* p > α(0.05)는 귀무가설이 채택되고 대립가설 기각 
* p-value 0과 1사이의 표준화된 자료

### 5. 검정통계량
* 귀무가설이 참이라는 가정에서 얻은 통계량
* Z-통계량 혹은 T-통계량이 널리 사용됨
* 검정통계량 = (표본평균 - 모평균) / 표본표준편차
* 통계적 가설검정을 위해서 확률분포를 결정하는데 사용되는 통계량

### 6. 신뢰구간
- 신뢰구간 : 표본 통계량에서 파생되어서 알 수 없는 모집단 모수값이 포함될 값의 범위
- 표본을 랜덤하게 추출하는 특성으로 인해 특정 모집단의 두 표본은 동일한 신뢰구간이 될 수 없음
- 신뢰수준 : 실제 모수를 추정하는데 몇 퍼센트의 확률로 신뢰구간이 실제 모수를 포함하게 되는 가에 대한 것
- 100개 중에서 95개가 모평균에 포함되면 신뢰구간을 95%

#### 유의수준과(α)과 신뢰도(1-α)
- 유의수준은 표본의 평균이 모평균과 같은데 표본의 평균이 모평균과 다르다고 선택하는 오류를 범할 허용한계
- 신뢰도(1-α)는 검정하려는 귀무가설이 참인 경우 이를 옳다고 판단할 확률
- 유의수준 5%와 신뢰도 95%가 많이 사용됨

## 7. 통계분석 기법

### 1. 통계분석
특정 집단을 대상으로 자료를 수집하여 대상집단의 정보를 구해서 통계분석 기법으로 통계적 추론을 하는 일련의 과정

#### 1> 차이검정

##### 1>1. 평균차이검정
- 어떤 집단간의 평균 차이 검정, 질적변수 1개와 연속변수 1개 분석
- 질적변수 1개는 집단을 구분, 연속변수 1개는 평균 계산
- 종류 : 평균검정(t-test, 집단 수 2개 이하), 분산분석(ANOVA, 집단 수 3개 이상)

##### 1>2. 평균검정(T-test)
- 집단 간에 평균 값을 비교하는 분석기법으로 1종 오류가 발생할 수 있음
- 3개의 집단에 대해서 평균분석을 하면 1종 오류가 발생할 가능성이 높아지므로 평균검정은 2개 집단에 대해서 분석을 함
- 평균검정은 집단이 1,2,3이면 1:2, 2:3, 1:3 처럼 3번 평균을 비교하지만 분산분석은 한번에 평균비교
- 표본의 크기가 30보다 크면 표준 정규분포에 가까워지고 30보다 작으면 예측범위가 좀 더 높은 t-분포 사용해야 함

###### 1] One Sample T-test
- 하나의 집단의 평균이 얼마인지 검사하는 방법
- ex. 질적변수는 남자이고 연속변수는 몸무게, 남자의 평균 몸무게를 분석

###### 2] Independent Samples (독립 표본) T-test
- 독립된 두 개의 질적변수를 사용해서 분석
- ex. A기업과 B기업의 평균 근무시간을 분석
- 변수는 그룹으로 분류되고 그룹 간의 차이를 평균으로 비교하는 방법
- 귀무가설 예시 : 도심내부와 도심내부 간 학생 성적에는 차이가 없다.
- R코드 : t.test(성적~거주지, data=grade)

###### 3] Paired Samples (대응 표본) T-test
- 집단을 전과 후로 구분해서 지출하는 평균 생활비 분석
- 짝을 이루는 변수를 전후에 분류해서 분석
- 특정 집단의 효과를 분석하기 위해 사용됨
- R코드 : t.test(before, after, mu=0, alternative="greater", paired=T)

##### 1>3. 분산분석(ANOVA)
- 전체분산을 여러 개로 분할하여 분석하는 것으로 어떤 요인(Factor)의 영향이 유의한지 검정
- 분석 데이터에서 집단이 3개 이상일 경우 사용
- 각 집단의 평균 차이에 의해서 발생되는 집단 간의 분산 비교
- F분포를 사용해서 가설을 검증하는 방법
- F 값의 의미
> F값 = 집단 간의 변량 / 집단 내의 변량

> F값이 클수록 집단 간 변량이 집단 내 변량보다 커진다는 것 의미

> 독립변수의 설명력이 크다는 것은 집단 간의 변량이 크다는 것을 의미하기 때문에 독립변수의 설명력이 커질수록 F값이 커짐

> 변량은 변수나 분산의 뜻으로 사용됨

###### 1] One way ANOVA
- 종속변수 한 개와 독립변수 한 개로 이루어진 데이터에서 사용하는 것으로 종속변수는 집단으로 분류되어 있는 경우 사용
- 하나의 변수에 그룹이 3개 이상이어야 함
- ex. 지점위치는 노원, 중구, 강남으로 구분하고 각 지점의 위치가 매출에 영향을 주는지 분석
- R코드 : aov(종속변수~factor1)

###### 2] Two way ANOVA
- 독립변수가 두 개 이상인 경우 집단 간의 차이를 분석하여 유의성 확인
- 평균 반응 프로파일을 사용하여 두 개의 변수 간에 상호작용(변화)을 확인하는 것
- 평균 반응 프로파일 : 두 변수 간의 상호작용을 확인하여 변화량 확인
> ex. 온도가 증가할 수록 오븐으로 요리한 것은 맛이 좋아지는 데에 비해 전자레인지로 요리한 것은 맛이 나빠진다는 것은 오븐으로 요리한 것과 전자레인지로 요리한 것이 음식 맛에 영향을 주므로 상호작용 발생
- ex. 독립변수로 지점위치와 온도를 가지고 있고 각 독립변수는 3개의 집단으로 분류되어 있음 -> 종속변수는 매출이며 지점 위치와 온도가 매출에 어떤 영향을 주는지 분석
- R 코드 : aov(종속변수~factor1+factor2)

###### 3] Repeated Measured ANOVA
- 시점 데이터를 사용해서 전과 후로 분석 -> 시점으로 3개월 전, 3개월 후, 6개월 후로 학생들의 점수를 분석
- 반복해서 측정하여 변화된 것을 비교하는 방법
- Two wway Repeated ANOVA는 시점 데이터와 집단 데이터를 사용해서 분석하는 형태 
- ex. 독립변수로 집단(실험군, 대조군)과 시점(시험 전, 시험 후)가 있고 종속변수로 통증이 있음

#### 2> 관계검정
* 차이검정은 그룹 간 차이(평균 or 분산)를 분석하는 것이고 관계검정은 변수와 변수의 관계(연관성)를 검정
* ex. 쇼핑몰에서 고객 만족도에 영향을 주는 변수를 찾고 고객 만족도를 올리는 변수를 찾는 활동

##### 2>1. 상관분석
- 두 개의 변수 간 관계를 통계적 기법으로 분석하는 행위로 변수 간 인과관계가 명확하지 않을 때 사용
- 두 변수가 균등관계인 경우 분석하는 것
- 상관관계는 선형관계를 전제로 함
- 두 변수 간 강한 관련성을 가지고 있는 경우 다른 변수를 예측
- ex. 키와 몸무게 -> 어떤 변수가 원인이고 어떤 변수가 결과인지 알 수 없을 때 변수는 균등관계에 있음
- 산점도(Scatter plot)를 사용해서 두 변수 간의 관계를 표현할 수 있음

###### 1] 공분산
- 두 변수 간에 분산을 공유하는 것으로 두 변수가 공통분산을 사용
- 공분산은 척도 단위에 민감성이 크기 때문에 표준화를 수행해야 함(표준화 시킨다는 것은 그 값이 0에서 1사이의 값을 가진다는 의미)
- ![공분산](https://blog.kakaocdn.net/dn/bpisv1/btqDwdI1e83/rPLfiF7gKnqJ9Mccl9RsF1/img.png)
- 출처 : https://yeomko.tistory.com/34

###### 2] 상관계수
- 두 변수의 관계를 하나의 수치로 나타내는 척도, r로 표현하며 r은 강도와 방향으로 계산됨
- 통계분석은 표본을 대상으로 분석하므로 r은 표본 상관계수이고 p는 모상관계수이다.
- 공분산은 척도단위에 민감하게 반응하기 때문에 상관계수는 표준화를 시킨 것
- ![상관계수](https://t1.daumcdn.net/cfile/tistory/9997FC4B5DF8948248)
- 출처 : https://math100.tistory.com/112
- ![상관계수정리](https://t1.daumcdn.net/cfile/tistory/9911464B5C6AA07817)
- 출처 : https://nittaku.tistory.com/456
- 상관계수의 해석은 1 ~ -1 의 값으로 해석. 상관계수 r이 0이면 두 변수 간의 상관관계가 없다는 것.
- 1.0 >= r >= 0.7 : 매우 강한 정(+) 상관관계
- 0.7 > r >= 0.3 : 강한 정(+) 상관관계
- 0.3 > r >= 0.1 : 약한 정(+) 상관관계
- 0.1 > r > -0.1 : 상관관계가 없다
- -0.1 >= r > -0.3 : 약한 음(-) 상관관계
- -0.3 >= r > -0.7 : 강한 음(-) 상관관계
- -0.7 >= r > -1 : 매우 강한 음(-) 상관관계

###### 3] 상관계수의 검정
- 상관계수를 검정하기 위해서는 사전에 귀무가설과 대립가설을 정의해야 함
- 귀무가설 : 두 변수간은 상관관계가 없다. (r=0)
- R코드 : cor(x1, x2)
- 선형선 그리기 R코드 : abline(lm(x2~x1))

###### 4] Pearson과 Spearman의 상관계수
- Pearson과 Spearman의 상관관계는 -1 ~ 1 범위의 값을 가짐
- Pearson은 상관계수가 +1이 되도록 하기 위해 한 변수가 증가하면 다른 변수도 일정한 크기만큼 증가해서 완전한 선형을 이룸
- Pearson 상관계수
> 두 변수간에 선형관계 크기를 측정, 비선형 상관관계는 측정하지 못함, 연속적 변수만 가능

- Spearman 상관계수
> 두 변수간에 선형과 비선형 관계를 모두 측정할 수 있음, 연속적인 변수와 이산형/순서형도 가능

##### 2>2. 회귀분석
- 회귀분석은 변수 간의 인과관계를 분석하는 것
- 상관관계에서는 두 변수는 변수 간 원인과 결과가 없는 균등한 변수, 회귀분석은 변수 간 원인과 결과가 있는 변수
- 상관분석은 변수가 1 대 1 관계지만 회귀분석은 1대 N의 관계에서 데이터를 분석하는 방법
- 회귀분석의 목적
> 예측 : 원인변수에 영향을 받는 기울기(회귀계수)를 찾아서 종속변수를 예측, 변수를 비표준화하여 사용, 경제학에서 많이 사용, ex. 내년도 성적 예측

> 설명 : 원인변수와 종속변수 간의 종속변수에 가장 영향을 주는 변수를 설명, 영향력이 높은 원인변수를 설명, 변수를 표준화하여 사용, 마케팅에서 많이 사용

###### 1] 선형회귀 모델
- 
